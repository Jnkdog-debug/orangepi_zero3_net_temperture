# ili9341å±å¹•é©±åŠ¨

## ğŸ“Œ ç®€ä»‹

è¯¥é©±åŠ¨æ˜¯é¦™æ©™æ´¾zero3çš„é©±åŠ¨

## éœ€æ±‚ä¸éœ€æ±‚åˆ†æ

- è¯¥é©±åŠ¨åº”è¯¥å¯ä»¥é©±åŠ¨è¿™å—ili9341çš„å±å¹•
- å¯ä»¥æ˜¾ç¤ºå›¾ç‰‡
- å¯ä»¥ä½¿ç”¨framebufferæ˜¾ç¤ºå‘½ä»¤è¡Œ
- ä½¿ç”¨è®¾å¤‡æ ‘æˆ–è€…è®¾å¤‡æ ‘æ’ä»¶
- åç»­å¯ä»¥æ˜¾ç¤ºqtç»„ä»¶

## å¼€å‘æ–¹æ³•
1. ä¼ªä»£ç 
2. å¼€å‘å¾ªç¯ ï¼š æœ‰å¯æ‰§è¡Œçš„demo ï¼Œç„¶åé€æ­¥è¿­ä»£
3. å€ŸåŠ©å¼€æºé¡¹ç›®

## ğŸ“ æ¥çº¿è¯´æ˜


- Data å¼•è„šæ¥ PC6
- ç”µæº 3.3V / GND


## ili9341 é©±åŠ¨è¯´æ˜
- é©±åŠ¨ç±»å‹ï¼šspi Driver  **å­—ç¬¦è®¾å¤‡é©±åŠ¨**
- é©±åŠ¨åè®®ï¼šä¸²è¡Œé€šä¿¡ï¼ˆå•çº¿ä¸²è¡Œå£ï¼‰
- æ”¯æŒçš„åŠŸèƒ½ï¼šæ¸©æ¹¿åº¦è¯»å–ã€ä¸­æ–­æ”¯æŒã€å®šæ—¶è¯»å–ã€ä¸ŠæŠ¥ input_event 
- æ³¨å†Œæ–¹å¼ï¼ˆå†…æ ¸æ¨¡å— / é™æ€ç¼–è¯‘ï¼‰


## spi åè®®è¯´æ˜
   è¯¦ç»†è¯·æŸ¥è¯¢spié€šä¿¡æ–¹å¼

---

## ğŸ“‚ æ–‡ä»¶è¯´æ˜

| æ–‡ä»¶å             | ä½œç”¨                      |
|--------------------|---------------------------|
| `Makefile`         | ç¼–è¯‘ç”¨çš„æ–‡ä»¶               |
| `test_user.c`      | ç”¨æˆ·ç©ºé—´æµ‹è¯•ç”¨ä¾‹   |
| `dht11.dts`        | è®¾å¤‡æ ‘æ’ä»¶ éœ€è¦æ”¾åˆ°overlaysæ–‡ä»¶å¤¹é‡Œç¼–è¯‘    |   

## é©±åŠ¨æ¥æº
 å†…æ ¸é©±åŠ¨


## ğŸ§ª ç¼–è¯‘æ–¹æ³•

### é©±åŠ¨ç¼–è¯‘ï¼š

```bash
make
```

## ç”±äºå†…æ ¸å­˜åœ¨fb_ili9341çš„ä»£ç 
   å®é™…ä¸Šç›´æ¥ä½¿ç”¨å°±å¯ä»¥
### ä½¿ç”¨æ–¹æ³•ï¼š
   1. é¦–å…ˆæŸ¥è¯¢æ˜¯å¦å†…æ ¸æ˜¯å¦å­˜åœ¨fb_ili9341çš„é©±åŠ¨
   ç”¨å‘½ä»¤æŸ¥çœ‹ï¼š


         ``` bash 
         orangepi@orangepizero3:~$ ls /lib/modules/6.1.31-sun50iw9/kernel/drivers/staging/fbtft/
         fb_agm1264k-fl.ko  fb_ili9320.ko  fb_ra8875.ko   fb_ssd1306.ko  fb_tinylcd.ko
         fb_bd663474.ko     fb_ili9325.ko  fb_s6d02a1.ko  fb_ssd1325.ko  fb_tls8204.ko
         fb_hx8340bn.ko     fb_ili9340.ko  fb_s6d1121.ko  fb_ssd1331.ko  fb_uc1611.ko
         fb_hx8347d.ko      fb_ili9341.ko  fb_seps525.ko  fb_ssd1351.ko  fb_uc1701.ko
         fb_hx8353d.ko      fb_ili9481.ko  fb_sh1106.ko   fb_st7735r.ko  fb_upd161704.ko
         fb_hx8357d.ko      fb_ili9486.ko  fb_ssd1289.ko  fb_st7789v.ko
         fb_ili9163.ko      fb_pcd8544.ko  fb_ssd1305.ko  fbtft.ko ```
      
 



2. åŠ è½½é©±åŠ¨
   ``` bash sudo modprobe fb_ili9341 ```

3. æ·»åŠ è®¾å¤‡æ ‘æ–‡ä»¶å¹¶é‡å¯ç”Ÿæ•ˆ
      1. æ–°å»ºä¸€ä¸ªè®¾å¤‡æ ‘æ’ä»¶æ–‡ä»¶ï¼š
      ``` bash nano ili9341.dts```
      æ–‡ä»¶å†…å®¹è§[ili9341.dts](./ili9341.dts) 
      
      2. ç”¨å‘½ä»¤æ·»åŠ  ili9341çš„è®¾å¤‡æ ‘æ’ä»¶æ–‡ä»¶ï¼š
      ``` bash sudo orangepi-add-overlay ili9341.dts ```


      3. é‡å¯ä½¿å®ƒç”Ÿæ•ˆï¼š
      ```bash sudo reboot```
      è§‚å¯Ÿ /boot/orangepiEnv.txt æ–‡ä»¶å¯ä»¥å‘ç°ï¼Œå·²ç»æ·»åŠ äº†è®¾å¤‡æ ‘é©±åŠ¨ï¼š
      ``` bash
      verbosity=1
      bootlogo=false
      console=both
      disp_mode=1920x1080p60
      overlay_prefix=sun50i-h616
      rootdev=UUID=2a44ed57-6df2-44b4-9d51-99000c47e55b
      rootfstype=ext4
      **user_overlays=ili9341**
      ```
      å®é™…ä¸Šåœ¨è®¾å¤‡æ ‘overlayæ–‡ä»¶å¤¹é‡Œæ·»åŠ .dtboæ–‡ä»¶ä¹Ÿæ˜¯ä¸€æ ·çš„ï¼Œåªä¸è¿‡éœ€è¦ç¼–è¯‘å’ŒåŠ è½½
      è¯¦ç»†è¿‡ç¨‹å’Œè¯­æ³•è§dht11çš„ç¼–è¯‘ã€‚


## åè‰²é—®é¢˜è¯·ç…§æ–‡æ¡£è§£å†³ï¼š[åè‰²é—®é¢˜](./åè‰²é—®é¢˜.md)
