## 🧪 DHT11 驱动开发任务

- [ ] 阅读 DHT11 数据手册并理解通信时序
- [ ] 收集开源 DHT11 Linux 驱动参考实现
- [ ] 规划 dht11 驱动文件目录与结构
- [ ] 编写驱动基础框架（platform_driver 注册/注销）
- [ ] 实现 GPIO 初始化与控制
- [ ] 实现数据接收与解析（温度 + 湿度）
- [ ] 实现字符设备接口（open/read/release）
- [ ] 编写测试程序验证温湿度读取




## 项目日志
- 2025年4月13日 21时31分 
    搭建好了环境。
    编写完了设备驱动，编译成功。
    编写了dht11 的驱动，移植野火的，没有测试，编译成功。
    编写了设备树文件，测试了，**但是找不到节点**，找到节点了，但是太奇怪了。
    在/boot/orangepiEnv.txt 里修改，这个就可以实现，太怪了。
    overlay_prefix=sun50i-h616
    overlays=spi1-cs1-spidev dht11
    这样就可以看到节点了，很怪  /
    没有测试驱动程序是否可以找到节点（找不到）

- 2025年4月14日 
    出去钓鱼了

- 2025年4月15日 10时25分 
    测试了驱动，但是驱动无法使用，正在修改bug🪲
    发现不需要加载overlays=spi1-cs1-spidev dht11 只需要overlays=dht11 
    也可以使用，但是加上似乎有用。

- 2025年4月16日 0时15分
    似乎设备树插件搞不出来，编译了设备树，模仿led写的，加载是正常的，
    不知道为什么香橙派官方不出一个教程，ai出的代码都用不了。
    但是还没有写驱动验证，看看是否可以使用。
    麻烦死了，为什么香橙派官方不出教程。
    难以想象接下来i2c和spi的程序怎么写。
    不行接下来换个镜像，源码，用armbian或者ubuntu来做，资料也多些。
- 2025年4月16日 18时37分
    这个开发的本质问题是如何编写一个香橙派可以使用的设备树的字符驱动，我现在不知道怎么修改设备树，
    以及做怎么使用gpio来编写一个驱动，
    这个驱动可以控制，关键是香橙派这个语法的到底是什么？为什么
    我无法使用他们的语法，一直显示无法找到pin      
- 2025年4月16日 19时04分
    成了，找到pin了，就是语法错误，我在sun50i-h618-orangepi-zero3.dts里
    嵌套定义了 dht11 所以一直不通过 ，所以才导致读取不出来

    **这是我之前写的，嵌套了，并且和驱动程序里不符合**
      		dht11: dht11 {
		compatible = "dht11_pin";

		dht11 {
			label = "dht11";
			gpios = <&pio 2 6 GPIO_ACTIVE_HIGH>; /* PC12 */
			
		};
	};
    **修改为这个就没有问题了，尝试了很多遍**
    	dht11: dht11 {
			compatible = "dht11_pin";
			label = "dht11_pin";
			gpios = <&pio 2 6 GPIO_ACTIVE_HIGH>; /* PC6 */
        }
			... ...
    这样子写就没问题了。
    接下来就是驱动逻辑问题，硬件资源终于获取成功了。可以打开dev了
- 2025年4月16日 19时27分 
    奶奶的我终于写出来了，原来是引脚错误，pc6 接到pc9 上去了，服了 所以一直显示resource busy。
    可能还需要校准，但是设备树和驱动着一块没有什么问题了

- 2025年4月18日 23时57分
    休息了两天，这两天心情不是很好，不过，晚上尝试使用伪代码来分析驱动代码，感觉真的不错，
    不论是分析代码，还是写代码，都是很好用的工具，具体写在fakecod.md这个文档里了，可以查看
    还是得多读书，技术博客虽然要读，但是它只是说明书。我要拥有计算思维，和写代码的能力。
    最近在看headfirst learn to code 和嗨翻c语言，这两本书真的很不错。
    然后就是要有项目文档的习惯，我这个驱动可以坚持下来，就是因为有这个良好的项目架构和记录。
    这些都要坚持。